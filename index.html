<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student-Teacher Appointment System</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <!-- Authentication Section -->
    <div id="auth-container" class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1>Student-Teacher Appointment System</h1>
                <p>Book appointments with teachers &amp; lecturers</p>
            </div>
            <div class="auth-form">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="email" class="form-control" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter your password">
                </div>
                <div class="form-group">
                    <label class="form-label">User Role</label>
                    <select id="userRole" class="form-control">
                        <option value="admin">Admin</option>
                        <option value="teacher">Teacher</option>
                        <option value="student">Student</option>
                    </select>
                </div>
                <button id="loginBtn" class="btn btn--primary btn--full-width">Login</button>
                <button id="registerBtn" class="btn btn--secondary btn--full-width mt-8">Register</button>
            </div>
            <div id="auth-message" class="auth-message"></div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app hidden">
        <!-- Navigation Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">Student-Teacher Appointment System</h1>
                <div class="header-actions">
                    <span id="current-user" class="user-info"></span>
                    <button id="logoutBtn" class="btn btn--outline btn--sm">Logout</button>
                </div>
            </div>
        </header>

        <!-- Navigation Menu -->
        <nav id="main-nav" class="main-nav">
            <div class="nav-content">
                <button class="nav-btn active" data-module="dashboard">Dashboard</button>
                <button class="nav-btn" data-module="teachers" data-role="admin">Manage Teachers</button>
                <button class="nav-btn" data-module="students" data-role="admin">Manage Students</button>
                <button class="nav-btn" data-module="appointments" data-role="admin">All Appointments</button>
                <button class="nav-btn" data-module="reports" data-role="admin">Reports</button>
                <button class="nav-btn" data-module="teacher-appointments" data-role="teacher">My Appointments</button>
                <button class="nav-btn" data-module="teacher-availability" data-role="teacher">Set Availability</button>
                <button class="nav-btn" data-module="teacher-messages" data-role="teacher">Messages</button>
                <button class="nav-btn" data-module="teacher-profile" data-role="teacher">My Profile</button>
                <button class="nav-btn" data-module="search-teachers" data-role="student">Search Teachers</button>
                <button class="nav-btn" data-module="book-appointment" data-role="student">Book Appointment</button>
                <button class="nav-btn" data-module="student-appointments" data-role="student">My Appointments</button>
                <button class="nav-btn" data-module="student-messages" data-role="student">Send Messages</button>
                <button class="nav-btn" data-module="student-profile" data-role="student">My Profile</button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Module -->
            <div id="dashboard-module" class="module active">
                <div class="module-header">
                    <h2>Dashboard</h2>
                </div>
                <div id="dashboard-content" class="dashboard-content">
                    <!-- Dashboard content will be populated by JavaScript -->
                </div>
            </div>

            <!-- Teachers Module (Admin Only) -->
            <div id="teachers-module" class="module">
                <div class="module-header">
                    <h2>Teacher Management</h2>
                    <button id="add-teacher-btn" class="btn btn--primary">Add New Teacher</button>
                </div>
                <div class="teachers-content">
                    <div class="search-bar">
                        <input type="text" id="teacher-search" class="form-control" placeholder="Search teachers...">
                        <select id="department-filter" class="form-control" style="margin-left: 1rem; width: auto;">
                            <option value="">All Departments</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Mathematics">Mathematics</option>
                            <option value="Physics">Physics</option>
                            <option value="Chemistry">Chemistry</option>
                            <option value="Biology">Biology</option>
                            <option value="English">English</option>
                            <option value="History">History</option>
                            <option value="Economics">Economics</option>
                        </select>
                    </div>
                    <div id="teachers-list" class="teachers-list">
                        <!-- Teachers list will be populated here -->
                    </div>
                </div>

                <!-- Add/Edit Teacher Modal -->
                <div id="teacher-modal" class="modal hidden">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="teacher-modal-title">Add New Teacher</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="teacher-form">
                                <div class="form-group">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" id="teacher-name" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email</label>
                                    <input type="email" id="teacher-email" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" id="teacher-phone" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Department</label>
                                    <select id="teacher-department" class="form-control" required>
                                        <option value="">Select Department</option>
                                        <option value="Computer Science">Computer Science</option>
                                        <option value="Mathematics">Mathematics</option>
                                        <option value="Physics">Physics</option>
                                        <option value="Chemistry">Chemistry</option>
                                        <option value="Biology">Biology</option>
                                        <option value="English">English</option>
                                        <option value="History">History</option>
                                        <option value="Economics">Economics</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Subject</label>
                                    <input type="text" id="teacher-subject" class="form-control" required>
                                </div>
                                <div class="modal-actions">
                                    <button type="submit" class="btn btn--primary">Save Teacher</button>
                                    <button type="button" class="btn btn--secondary" onclick="closeTeacherModal()">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Students Module (Admin Only) -->
            <div id="students-module" class="module">
                <div class="module-header">
                    <h2>Student Management</h2>
                    <button id="approve-pending-btn" class="btn btn--secondary">Approve Pending</button>
                </div>
                <div class="students-content">
                    <div class="search-bar">
                        <input type="text" id="student-search" class="form-control" placeholder="Search students...">
                        <select id="status-filter" class="form-control" style="margin-left: 1rem; width: auto;">
                            <option value="">All Status</option>
                            <option value="approved">Approved</option>
                            <option value="pending">Pending</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                    <div id="students-list" class="students-list">
                        <!-- Students list will be populated here -->
                    </div>
                </div>
            </div>

            <!-- All Appointments Module (Admin Only) -->
            <div id="appointments-module" class="module">
                <div class="module-header">
                    <h2>All Appointments</h2>
                    <div class="header-filters">
                        <select id="appointment-status-filter" class="form-control" style="width: auto;">
                            <option value="">All Status</option>
                            <option value="pending">Pending</option>
                            <option value="approved">Approved</option>
                            <option value="cancelled">Cancelled</option>
                            <option value="completed">Completed</option>
                        </select>
                        <input type="date" id="appointment-date-filter" class="form-control" style="margin-left: 1rem; width: auto;">
                    </div>
                </div>
                <div id="appointments-list" class="appointments-list">
                    <!-- Appointments list will be populated here -->
                </div>
            </div>

            <!-- Teacher Appointments Module -->
            <div id="teacher-appointments-module" class="module">
                <div class="module-header">
                    <h2>My Appointments</h2>
                    <div class="header-filters">
                        <select id="teacher-appointment-filter" class="form-control" style="width: auto;">
                            <option value="">All Appointments</option>
                            <option value="pending">Pending Approval</option>
                            <option value="approved">Approved</option>
                            <option value="today">Today</option>
                            <option value="upcoming">Upcoming</option>
                        </select>
                    </div>
                </div>
                <div id="teacher-appointments-list" class="teacher-appointments-list">
                    <!-- Teacher appointments will be populated here -->
                </div>
            </div>

            <!-- Teacher Availability Module -->
            <div id="teacher-availability-module" class="module">
                <div class="module-header">
                    <h2>Set Availability</h2>
                    <button id="save-availability-btn" class="btn btn--primary">Save Availability</button>
                </div>
                <div class="availability-content">
                    <div class="availability-grid">
                        <div class="time-slot-header">
                            <h4>Weekly Schedule</h4>
                            <p>Select your available time slots for each day</p>
                        </div>
                        <div id="availability-schedule" class="availability-schedule">
                            <!-- Availability schedule will be generated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Teacher Messages Module -->
            <div id="teacher-messages-module" class="module">
                <div class="module-header">
                    <h2>Messages from Students</h2>
                </div>
                <div id="teacher-messages-list" class="teacher-messages-list">
                    <!-- Teacher messages will be populated here -->
                </div>
            </div>

            <!-- Teacher Profile Module -->
            <div id="teacher-profile-module" class="module">
                <div class="module-header">
                    <h2>My Profile</h2>
                    <button id="edit-teacher-profile-btn" class="btn btn--primary">Edit Profile</button>
                </div>
                <div id="teacher-profile-content" class="teacher-profile-content">
                    <!-- Teacher profile content will be populated here -->
                </div>
            </div>

            <!-- Reports Module -->
            <div id="reports-module" class="module">
                <div class="module-header">
                    <h2>Reports &amp; Analytics</h2>
                </div>
                <div class="reports-content">
                    <div class="report-cards">
                        <div class="card">
                            <div class="card__body">
                                <h4>Member Report</h4>
                                <button class="btn btn--primary btn--sm" onclick="generateMemberReport()">Generate</button>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card__body">
                                <h4>Payment Report</h4>
                                <button class="btn btn--primary btn--sm" onclick="generatePaymentReport()">Generate</button>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card__body">
                                <h4>Monthly Summary</h4>
                                <button class="btn btn--primary btn--sm" onclick="generateMonthlySummary()">Generate</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Teachers Module (Student Only) -->
            <div id="search-teachers-module" class="module">
                <div class="module-header">
                    <h2>Search Teachers</h2>
                </div>
                <div class="search-content">
                    <div class="search-filters">
                        <input type="text" id="teacher-search-input" class="form-control" placeholder="Search by name or subject...">
                        <select id="department-search-filter" class="form-control" style="margin-left: 1rem;">
                            <option value="">All Departments</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Mathematics">Mathematics</option>
                            <option value="Physics">Physics</option>
                            <option value="Chemistry">Chemistry</option>
                            <option value="Biology">Biology</option>
                            <option value="English">English</option>
                            <option value="History">History</option>
                            <option value="Economics">Economics</option>
                        </select>
                    </div>
                    <div id="teachers-search-results" class="teachers-search-results">
                        <!-- Search results will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Book Appointment Module (Student Only) -->
            <div id="book-appointment-module" class="module">
                <div class="module-header">
                    <h2>Book Appointment</h2>
                </div>
                <div class="book-appointment-content">
                    <form id="appointment-form" class="appointment-form">
                        <div class="form-group">
                            <label class="form-label">Select Teacher</label>
                            <select id="appointment-teacher" class="form-control" required>
                                <option value="">Choose a teacher</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Appointment Date</label>
                            <input type="date" id="appointment-date" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Time Slot</label>
                            <select id="appointment-time" class="form-control" required>
                                <option value="">Select date first</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Duration</label>
                            <select id="appointment-duration" class="form-control" required>
                                <option value="15 minutes">15 minutes</option>
                                <option value="30 minutes" selected>30 minutes</option>
                                <option value="45 minutes">45 minutes</option>
                                <option value="1 hour">1 hour</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Purpose/Message</label>
                            <textarea id="appointment-purpose" class="form-control" rows="4" placeholder="Please describe the purpose of your appointment..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Book Appointment</button>
                    </form>
                </div>
            </div>

            <!-- Student Appointments Module -->
            <div id="student-appointments-module" class="module">
                <div class="module-header">
                    <h2>My Appointments</h2>
                    <div class="header-filters">
                        <select id="student-appointment-filter" class="form-control" style="width: auto;">
                            <option value="">All Appointments</option>
                            <option value="pending">Pending</option>
                            <option value="approved">Approved</option>
                            <option value="cancelled">Cancelled</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                </div>
                <div id="student-appointments-list" class="student-appointments-list">
                    <!-- Student appointments will be populated here -->
                </div>
            </div>

            <!-- Student Messages Module -->
            <div id="student-messages-module" class="module">
                <div class="module-header">
                    <h2>Send Messages</h2>
                </div>
                <div class="messages-content">
                    <div class="message-form-section">
                        <form id="message-form" class="message-form">
                            <div class="form-group">
                                <label class="form-label">Select Teacher</label>
                                <select id="message-teacher" class="form-control" required>
                                    <option value="">Choose a teacher</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Subject</label>
                                <input type="text" id="message-subject" class="form-control" placeholder="Message subject" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Message</label>
                                <textarea id="message-content" class="form-control" rows="5" placeholder="Type your message here..." required></textarea>
                            </div>
                            <button type="submit" class="btn btn--primary">Send Message</button>
                        </form>
                    </div>
                    <div class="message-history-section">
                        <h3>Message History</h3>
                        <div id="student-message-history" class="student-message-history">
                            <!-- Message history will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student Profile Module -->
            <div id="student-profile-module" class="module">
                <div class="module-header">
                    <h2>My Profile</h2>
                    <button id="edit-student-profile-btn" class="btn btn--primary">Edit Profile</button>
                </div>
                <div id="student-profile-content" class="student-profile-content">
                    <!-- Student profile content will be populated here -->
                </div>
            </div>

            <!-- Student Registration Module -->
            <div id="registration-module" class="module">
                <div class="module-header">
                    <h2>Student Registration</h2>
                </div>
                <div class="registration-content">
                    <div class="registration-info">
                        <div class="card">
                            <div class="card__body">
                                <h3>Registration Process</h3>
                                <ol>
                                    <li>Fill out the registration form completely</li>
                                    <li>Submit your registration for admin approval</li>
                                    <li>Wait for email confirmation of approval</li>
                                    <li>Once approved, you can login and start booking appointments</li>
                                </ol>
                                <p><strong>Note:</strong> All student registrations require admin approval for security purposes.</p>
                            </div>
                        </div>
                    </div>
                    <div class="registration-form-section">
                        <form id="registration-form" class="registration-form">
                            <h3>Register as Student</h3>
                            <div class="form-group">
                                <label class="form-label">Full Name</label>
                                <input type="text" id="reg-name" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" id="reg-email" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Roll Number</label>
                                <input type="text" id="reg-roll" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Department</label>
                                <select id="reg-department" class="form-control" required>
                                    <option value="">Select Department</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="Physics">Physics</option>
                                    <option value="Chemistry">Chemistry</option>
                                    <option value="Biology">Biology</option>
                                    <option value="English">English</option>
                                    <option value="History">History</option>
                                    <option value="Economics">Economics</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Password</label>
                                <input type="password" id="reg-password" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Confirm Password</label>
                                <input type="password" id="reg-confirm-password" class="form-control" required>
                            </div>
                            <button type="submit" class="btn btn--primary btn--full-width">Submit Registration</button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="app.js"></script>
</body>
</html>